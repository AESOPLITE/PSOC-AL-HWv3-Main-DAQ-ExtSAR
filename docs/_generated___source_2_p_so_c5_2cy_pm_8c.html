<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AESOP-Lite DAQ board Main PSOC: al-main-daq.cydsn/Generated_Source/PSoC5/cyPm.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AESOP-Lite DAQ board Main PSOC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1a3a5b7916db6f49a23d101328f675c1.html">al-main-daq.cydsn</a></li><li class="navelem"><a class="el" href="dir_feabb2d18a81bafd00d5c0766b0362e3.html">Generated_Source</a></li><li class="navelem"><a class="el" href="dir_c19a56f5bc071619abcc775953a4e230.html">PSoC5</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cyPm.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provides an API for the power management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8h_source.html">cyPm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cyapicallbacks_8h_source.html">cyapicallbacks.h</a>&quot;</code><br />
</div>
<p><a href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a35a5ce6546a22af1abb3ce052a7470f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a35a5ce6546a22af1abb3ce052a7470f5">CyPmSaveClocks</a> (void)</td></tr>
<tr class="separator:a35a5ce6546a22af1abb3ce052a7470f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa867cec43f048788a1eab108352b12d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#aa867cec43f048788a1eab108352b12d1">CyPmRestoreClocks</a> (void)</td></tr>
<tr class="separator:aa867cec43f048788a1eab108352b12d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52a3859dccff44dd01344bd49eeb38f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a52a3859dccff44dd01344bd49eeb38f2">CyPmAltAct</a> (<a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> wakeupTime, <a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> wakeupSource)</td></tr>
<tr class="separator:a52a3859dccff44dd01344bd49eeb38f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf64016fa29d7a55b26f81b35f48003"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a0bf64016fa29d7a55b26f81b35f48003">CyPmSleep</a> (<a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> wakeupTime, <a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> wakeupSource)</td></tr>
<tr class="separator:a0bf64016fa29d7a55b26f81b35f48003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe8930b62cf3b095201cb63c8b0504c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a2fe8930b62cf3b095201cb63c8b0504c">CyPmHibernate</a> (void)</td></tr>
<tr class="separator:a2fe8930b62cf3b095201cb63c8b0504c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43904ef8fbf062846939f2ac6891ced0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a43904ef8fbf062846939f2ac6891ced0">CyPmHibernateEx</a> (<a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> wakeupSource)</td></tr>
<tr class="separator:a43904ef8fbf062846939f2ac6891ced0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6c3c26c960cc2a69aa7d9a409875ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a7f6c3c26c960cc2a69aa7d9a409875ff">CyPmReadStatus</a> (<a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> mask)</td></tr>
<tr class="separator:a7f6c3c26c960cc2a69aa7d9a409875ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bacbe3806f71ef8172c62f9e7909a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#af0bacbe3806f71ef8172c62f9e7909a6">CyPmCtwSetInterval</a> (<a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> ctwInterval)</td></tr>
<tr class="separator:af0bacbe3806f71ef8172c62f9e7909a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad566865474d29d815c49dd4d0fe5de3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#ad566865474d29d815c49dd4d0fe5de3b">CyPmOppsSet</a> (void)</td></tr>
<tr class="separator:ad566865474d29d815c49dd4d0fe5de3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108a3e95daf6ecbd7362ca1f8db8496e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c.html#a108a3e95daf6ecbd7362ca1f8db8496e">CyPmFtwSetInterval</a> (<a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> ftwInterval)</td></tr>
<tr class="separator:a108a3e95daf6ecbd7362ca1f8db8496e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Provides an API for the power management. </p>
<dl class="section version"><dt>Version</dt><dd>6.10</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Documentation of the API's in this file is located in the System Reference Guide provided with PSoC Creator.</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2008-2021, Cypress Semiconductor Corporation. All rights reserved. You may use this file only in accordance with the license, terms, conditions, disclaimers, and limitations in the end user license agreement accompanying the software package with which this file was provided. </dd></dl>

<p class="definition">Definition in file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a52a3859dccff44dd01344bd49eeb38f2" name="a52a3859dccff44dd01344bd49eeb38f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52a3859dccff44dd01344bd49eeb38f2">&#9670;&nbsp;</a></span>CyPmAltAct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmAltAct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>wakeupTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>wakeupSource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmAltAct Puts the part into the Alternate Active (Standby) state. The Alternate Active state can allow for any of the capabilities of the device to be active, but the operation of this function is dependent on the CPU being disabled during the Alternate Active state. The configuration code and the component APIs will configure the template for the Alternate Active state to be the same as the Active state with the exception that the CPU will be disabled during Alternate Active.</p>
<p >Note Before calling this function, you must manually configure the power mode of the source clocks for the timer that is used as the wakeup timer.</p>
<p >PSoC 3: Before switching to Alternate Active, if a wakeupTime other than NONE is specified, then the appropriate timer state is configured as specified with the interrupt for that timer disabled. The wakeup source will be the combination of the values specified in the wakeupSource and any timer specified in the wakeupTime argument. Once the wakeup condition is satisfied, then all saved state is restored and the function returns in the Active state.</p>
<p >Note that if the wakeupTime is made with a different value, the period before the wakeup occurs can be significantly shorter than the specified time. If the next call is made with the same wakeupTime value, then the wakeup will occur the specified period after the previous wakeup occurred.</p>
<p >If a wakeupTime other than NONE is specified, then upon exit the state of the specified timer will be left as specified by wakeupTime with the timer enabled and the interrupt disabled. If the CTW, FTW or One PPS is already configured for wakeup, for example with the SleepTimer or RTC components, then specify NONE for the wakeupTime and include the appropriate source for wakeupSource.</p>
<p >PSoC 5LP: This function is used to both enter the Alternate Active mode and halt the processor. For PSoC 3 these two actions must be paired together. With PSoC 5LP the processor can be halted independently with the <a class="el" href="group___c_m_s_i_s___core___instruction_interface.html#gad23bf2b78a9a4524157c9de0d30b7448" title="Wait For Interrupt.">__WFI()</a> function from the CMSIS library that is included in Creator. This function should be used instead when the action required is just to halt the processor until an enabled interrupt occurs.</p>
<p >The wakeupTime parameter is not used for this device. It must be set to zero (PM_ALT_ACT_TIME_NONE). The wake up time configuration can be done by a separate component: the CTW wakeup interval should be configured with the Sleep Timer component and one second interval should be configured with the RTC component.</p>
<p >The wakeup behavior depends on the wakeupSource parameter in the following manner: upon function execution the device will be switched from Active to Alternate Active mode and then the CPU will be halted. When an enabled wakeup event occurs the device will return to Active mode. Similarly when an enabled interrupt occurs the CPU will be started. These two actions will occur together provided that the event that occurs is an enabled wakeup source and also generates an interrupt. If just the wakeup event occurs then the device will be in Active mode, but the CPU will remain halted waiting for an interrupt. If an interrupt occurs from something other than a wakeup source, then the CPU will restart with the device in Alternate Active mode until a wakeup event occurs.</p>
<p >For example, if CyPmAltAct(PM_ALT_ACT_TIME_NONE, PM_ALT_ACT_SRC_PICU) is called and PICU interrupt occurs, the CPU will be started and device will be switched into Active mode. And if CyPmAltAct(PM_ALT_ACT_TIME_NONE,
 PM_ALT_ACT_SRC_NONE) is called and PICU interrupt occurs, the CPU will be started while device remains in Alternate Active mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wakeupTime</td><td>Specifies a timer wakeup source and the frequency of that source. For PSoC 5LP this parameter is ignored.</td></tr>
  </table>
  </dd>
</dl>
<p>Define Time PM_ALT_ACT_TIME_NONE None </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PM_ALT_ACT_TIME_ONE_PPS</td><td>One PPS: 1 second </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_2MS</td><td>CTW: 2 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_4MS</td><td>CTW: 4 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_8MS</td><td>CTW: 8 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_16MS</td><td>CTW: 16 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_32MS</td><td>CTW: 32 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_64MS</td><td>CTW: 64 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_128MS</td><td>CTW: 128 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_256MS</td><td>CTW: 256 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_512MS</td><td>CTW: 512 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_1024MS</td><td>CTW: 1024 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_2048MS</td><td>CTW: 2048 ms </td></tr>
    <tr><td class="paramname">PM_ALT_ACT_TIME_CTW_4096MS</td><td>CTW: 4096 ms PM_ALT_ACT_TIME_FTW(1-256)* FTW: 10us to 2.56 ms</td></tr>
    <tr><td class="paramname">*Note</td><td>PM_ALT_ACT_TIME_FTW() is a macro that takes an argument that specifies how many increments of 10 us to delay. For PSoC 3 silicon the valid range of values is 1 to 256.</td></tr>
    <tr><td class="paramname">wakeUpSource</td><td>Specifies a bitwise mask of wakeup sources. In addition, if a wakeupTime has been specified, the associated timer will be included as a wakeup source.</td></tr>
  </table>
  </dd>
</dl>
<p>Define Source PM_ALT_ACT_SRC_NONE None PM_ALT_ACT_SRC_COMPARATOR0 Comparator 0 PM_ALT_ACT_SRC_COMPARATOR1 Comparator 1 PM_ALT_ACT_SRC_COMPARATOR2 Comparator 2 PM_ALT_ACT_SRC_COMPARATOR3 Comparator 3 PM_ALT_ACT_SRC_INTERRUPT Interrupt PM_ALT_ACT_SRC_PICU PICU PM_ALT_ACT_SRC_I2C I2C PM_ALT_ACT_SRC_BOOSTCONVERTER Boost Converter PM_ALT_ACT_SRC_FTW Fast Timewheel* PM_ALT_ACT_SRC_VD High and Low Voltage Detection (HVI, LVI)* PM_ALT_ACT_SRC_CTW Central Timewheel** PM_ALT_ACT_SRC_ONE_PPS One PPS** PM_ALT_ACT_SRC_LCD LCD</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*Note</td><td>: FTW and HVI/LVI wakeup signals are in the same mask bit. </td></tr>
    <tr><td class="paramname">**Note</td><td>CTW and One PPS wakeup signals are in the same mask bit.</td></tr>
  </table>
  </dd>
</dl>
<p>When specifying a Comparator as the wakeupSource, an instance specific define that will track with the specific comparator that the instance is placed into should be used. As an example, for a Comparator instance named </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MyComp</td><td>the value to OR into the mask is: MyComp_ctComp__CMP_MASK.</td></tr>
  </table>
  </dd>
</dl>
<p>When CTW, FTW or One PPS is used as a wakeup source, the <a class="el" href="codegentemp_2cy_pm_8c.html#a7f6c3c26c960cc2a69aa7d9a409875ff">CyPmReadStatus()</a> function must be called upon wakeup with a corresponding parameter. Please refer to the <a class="el" href="codegentemp_2cy_pm_8c.html#a7f6c3c26c960cc2a69aa7d9a409875ff">CyPmReadStatus()</a> API in the System Reference Guide for more information.</p>
<p >Reentrant: No</p>
<p >\sideeffect If a wakeupTime other than NONE is specified, then upon exit the state of the specified timer will be left as specified by wakeupTime with the timer enabled and the interrupt disabled. Also, the ILO 1 KHz (if CTW timer is used as wakeup time) or ILO 100 KHz (if the FTW timer is used as wakeup time) will be left started. </p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l00625">625</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="af0bacbe3806f71ef8172c62f9e7909a6" name="af0bacbe3806f71ef8172c62f9e7909a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0bacbe3806f71ef8172c62f9e7909a6">&#9670;&nbsp;</a></span>CyPmCtwSetInterval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmCtwSetInterval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>ctwInterval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmCtwSetInterval Performs the CTW configuration:</p><ul>
<li>Disables the CTW interrupt</li>
<li>Enables 1 kHz ILO</li>
<li>Sets a new CTW interval</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctwInterval</td><td>the CTW interval to be set.</td></tr>
  </table>
  </dd>
</dl>
<p>\sideeffect Enables ILO 1 KHz clock and leaves it enabled. </p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01473">1473</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a108a3e95daf6ecbd7362ca1f8db8496e" name="a108a3e95daf6ecbd7362ca1f8db8496e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108a3e95daf6ecbd7362ca1f8db8496e">&#9670;&nbsp;</a></span>CyPmFtwSetInterval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmFtwSetInterval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>ftwInterval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmFtwSetInterval Performs the FTW configuration:</p><ul>
<li>Disables the FTW interrupt</li>
<li>Enables 100 kHz ILO</li>
<li>Sets a new FTW interval.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ftwInterval</td><td>The FTW counter interval.</td></tr>
  </table>
  </dd>
</dl>
<p>\sideeffect Enables the ILO 100 KHz clock and leaves it enabled. </p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01550">1550</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a2fe8930b62cf3b095201cb63c8b0504c" name="a2fe8930b62cf3b095201cb63c8b0504c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe8930b62cf3b095201cb63c8b0504c">&#9670;&nbsp;</a></span>CyPmHibernate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmHibernate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmHibernate Puts the part into the Hibernate state.</p>
<p >Before switching to Hibernate, the current status of the PICU wakeup source bit is saved and then set. This configures the device to wake up from the PICU. Make sure you have at least one pin configured to generate PICU interrupt. For pin Px.y, the register "PICU_INTTYPE_PICUx_INTTYPEy" controls the PICU behavior. In the TRM, this register is "PICU[0..15]_INTTYPE[0..7]." In the Pins component datasheet, this register is referred to as the IRQ option. Once the wakeup occurs, the PICU wakeup source bit is restored and the PSoC returns to the Active state.</p>
<p >Reentrant: No</p>
<p >\sideeffect Applications must wait 20 us before re-entering hibernate or sleep after waking up from hibernate. The 20 us allows the sleep regulator time to stabilize before the next hibernate / sleep event occurs. The 20 us requirement begins when the device wakes up. There is no hardware check that this requirement is met. The specified delay should be done on ISR entry.</p>
<p >After the wakeup PICU interrupt occurs, the Pin_ClearInterrupt() (where Pin is instance name of the Pins component) function must be called to clear the latched pin events to allow the proper Hibernate mode entry and to enable detection of future events.</p>
<p >The 1 kHz ILO clock is expected to be enabled for PSoC 3 and PSoC 5LP to measure Hibernate/Sleep regulator settling time after a reset. The holdoff delay is measured using the rising edges of the 1 kHz ILO. </p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01095">1095</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a43904ef8fbf062846939f2ac6891ced0" name="a43904ef8fbf062846939f2ac6891ced0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43904ef8fbf062846939f2ac6891ced0">&#9670;&nbsp;</a></span>CyPmHibernateEx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmHibernateEx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>wakeupSource</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmHibernateEx Puts the part into the Hibernate state.</p>
<p >The following wake up sources can be configured: PICU interrupt, Comparator0, Comparator1, Comparator2, and Comparator3 output.</p>
<p >Before switching to Hibernate, the current status of the PICU wakeup source bit is saved and then set.</p>
<p >If using PICU as the wake up source, make sure you have at least one pin configured to generate a PICU interrupt. For pin Px.y, the register "PICU_INTTYPE_PICUx_INTTYPEy" controls the PICU behavior. In the TRM, this register is "PICU[0..15]_INTTYPE[0..7]." In the Pins component datasheet, this register is referred to as the IRQ option. Once the wakeup occurs, the PICU wakeup source bit is restored and the PSoC returns to the Active state.</p>
<p >If using a comparator as the wake up source, make sure you call this function with the 'wakeupSource' parameter set to the appropriate comparator. The part is configured for the requested wakeup source by setting the corresponding bits in PM_WAKEUP_CFG1 register.</p>
<p >Function call CyPmHibernateEx(CY_PM_HIB_SRC_PICU) will act in the same way as <a class="el" href="codegentemp_2cy_pm_8c.html#a2fe8930b62cf3b095201cb63c8b0504c">CyPmHibernate()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wakeupSource</td><td>Parameter Value Description CY_PM_HIB_SRC_PICU PICU interrupt is set as the wake up source. CY_PM_HIB_SRC_COMPARATOR0 Comparator 0 is set as the wake up source. CY_PM_HIB_SRC_COMPARATOR1 Comparator 1 is set as the wake up source. CY_PM_HIB_SRC_COMPARATOR2 Comparator 2 is set as the wake up source. CY_PM_HIB_SRC_COMPARATOR3 Comparator 3 is set as the wake up source.</td></tr>
  </table>
  </dd>
</dl>
<p>Reentrant: No</p>
<p >\sideeffect Applications must wait 20 us before re-entering hibernate or sleep after waking up from hibernate. The 20 us allows the sleep regulator time to stabilize before the next hibernate / sleep event occurs. The 20 us requirement begins when the device wakes up. There is no hardware check that this requirement is met. The specified delay should be done on ISR entry.</p>
<p >After the wakeup PICU interrupt occurs, the Pin_ClearInterrupt() (where Pin is instance name of the Pins component) function must be called to clear the latched pin events to allow the proper Hibernate mode entry and to enable detection of future events.</p>
<p >The 1 kHz ILO clock is expected to be enabled for PSoC 3 and PSoC 5LP to measure Hibernate/Sleep regulator settling time after a reset. The holdoff delay is measured using the rising edges of the 1 kHz ILO. </p>
<p >The Hibernate/Sleep regulator has a settling time after a reset. During this time, the system ignores requests to enter the Sleep and Hibernate modes. The holdoff delay is measured using the rising edges of the 1 kHz ILO.</p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01156">1156</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="ad566865474d29d815c49dd4d0fe5de3b" name="ad566865474d29d815c49dd4d0fe5de3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad566865474d29d815c49dd4d0fe5de3b">&#9670;&nbsp;</a></span>CyPmOppsSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmOppsSet </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmOppsSet Performs 1PPS configuration:</p><ul>
<li>Starts 32 KHz XTAL</li>
<li>Disables 1PPS interrupts</li>
<li>Enables 1PPS </li>
</ul>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01518">1518</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a7f6c3c26c960cc2a69aa7d9a409875ff" name="a7f6c3c26c960cc2a69aa7d9a409875ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6c3c26c960cc2a69aa7d9a409875ff">&#9670;&nbsp;</a></span>CyPmReadStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> CyPmReadStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>mask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmReadStatus Manages the Power Manager Interrupt Status Register. This register has the interrupt status for the one pulse per second, central timewheel and fast timewheel timers. This hardware register clears on read. To allow for only clearing the bits of interest and preserving the other bits, this function uses a shadow register that retains the state. This function reads the status register and ORs that value with the shadow register. That is the value that is returned. Then the bits in the mask that are set are cleared from this value and written back to the shadow register.</p>
<p >Note You must call this function within 1 ms (1 clock cycle of the ILO) after a CTW event has occurred.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mask</td><td>Bits in the shadow register to clear. <pre class="fragment"> Define                      Source
</pre> CY_PM_FTW_INT Fast Timewheel CY_PM_CTW_INT Central Timewheel CY_PM_ONEPPS_INT One Pulse Per Second</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Status. Same bits values as the mask parameter. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l01285">1285</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="aa867cec43f048788a1eab108352b12d1" name="aa867cec43f048788a1eab108352b12d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa867cec43f048788a1eab108352b12d1">&#9670;&nbsp;</a></span>CyPmRestoreClocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmRestoreClocks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmRestoreClocks Restores any state that was preserved by the last call to <a class="el" href="codegentemp_2cy_pm_8c.html#a35a5ce6546a22af1abb3ce052a7470f5">CyPmSaveClocks()</a>. The Flash wait state setting is also restored.</p>
<p >Note If the Master Clock source is routed through the DSI inputs, then it must be set manually to another source before using the <a class="el" href="codegentemp_2cy_pm_8c.html#a35a5ce6546a22af1abb3ce052a7470f5">CyPmSaveClocks()</a>/CyPmRestoreClocks() functions.</p>
<p >PSoC 3 and PSoC 5LP: The merge region could be used to process state when the megahertz crystal is not ready after a hold-off timeout.</p>
<p >PSoC 5: The 130 ms is given for the megahertz crystal to stabilize. Its readiness is not verified after a hold-off timeout. </p>
<p >Enabling XMHZ XTAL. The actual <a class="el" href="codegentemp_2_cy_lib_8c.html#a74e124d28c39efa187ea34eda93858d2">CyXTAL_Start()</a> with a non zero wait period uses FTW for period measurement. This could cause a problem if CTW/FTW is used as a wake up time in the low power modes APIs. So, the XTAL wait procedure is implemented with a software delay.</p>
<p >Process the situation when megahertz crystal is not ready. Time to stabilize the value is crystal specific.</p>
<p >Enable PLL. The actual <a class="el" href="codegentemp_2_cy_lib_8c.html#ae92d33416337a7530e82e002631f30b8">CyPLL_OUT_Start()</a> without wait period uses FTW for period measurement. This could cause a problem if CTW/FTW is used as a wakeup time in the low power modes APIs. To omit this issue PLL wait procedure is implemented with a software delay.</p>
<p >Process the situation when PLL is not ready.</p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l00268">268</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a35a5ce6546a22af1abb3ce052a7470f5" name="a35a5ce6546a22af1abb3ce052a7470f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a5ce6546a22af1abb3ce052a7470f5">&#9670;&nbsp;</a></span>CyPmSaveClocks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmSaveClocks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmSaveClocks This function is called in preparation for entering sleep or hibernate low power modes. Saves all the states of the clocking system that do not persist during sleep/hibernate or that need to be altered in preparation for sleep/hibernate. Shutdowns all the digital and analog clock dividers for the active power mode configuration.</p>
<p >Switches the master clock over to the IMO and shuts down the PLL and MHz Crystal. The IMO frequency is set to either 12 MHz or 48 MHz to match the Design-Wide Resources System Editor "Enable Fast IMO During Startup" setting. The ILO and 32 KHz oscillators are not impacted. The current Flash wait state setting is saved and the Flash wait state setting is set for the current IMO speed.</p>
<p >Note If the Master Clock source is routed through the DSI inputs, then it must be set manually to another source before using the <a class="el" href="codegentemp_2cy_pm_8c.html#a35a5ce6546a22af1abb3ce052a7470f5">CyPmSaveClocks()</a>/CyPmRestoreClocks() functions.</p>
<p >\sideeffect All peripheral clocks are going to be off after this API method call. </p>
<p >Save the enable state of delay between the system bus clock and each of the 4 individual analog clocks. This bit non-retention and its value should be restored on wakeup.</p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l00073">73</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
<a id="a0bf64016fa29d7a55b26f81b35f48003" name="a0bf64016fa29d7a55b26f81b35f48003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf64016fa29d7a55b26f81b35f48003">&#9670;&nbsp;</a></span>CyPmSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CyPmSleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>wakeupTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="codegentemp_2cytypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>wakeupSource</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Function Name: CyPmSleep Puts the part into the Sleep state.</p>
<p >Note Before calling this function, you must manually configure the power mode of the source clocks for the timer that is used as the wakeup timer.</p>
<p >Note Before calling this function, you must prepare clock tree configuration for the low power mode by calling <a class="el" href="codegentemp_2cy_pm_8c.html#a35a5ce6546a22af1abb3ce052a7470f5">CyPmSaveClocks()</a>. And restore clock configuration after <a class="el" href="codegentemp_2cy_pm_8c.html#a0bf64016fa29d7a55b26f81b35f48003">CyPmSleep()</a> execution by calling <a class="el" href="codegentemp_2cy_pm_8c.html#aa867cec43f048788a1eab108352b12d1">CyPmRestoreClocks()</a>. See Power Management section, Clock Configuration subsection of the System Reference Guide for more information.</p>
<p >PSoC 3: Before switching to Sleep, if a wakeupTime other than NONE is specified, then the appropriate timer state is configured as specified with the interrupt for that timer disabled. The wakeup source will be a combination of the values specified in the wakeupSource and any timer specified in the wakeupTime argument. Once the wakeup condition is satisfied, then all saved state is restored and the function returns in the Active state.</p>
<p >Note that if the wakeupTime is made with a different value, the period before the wakeup occurs can be significantly shorter than the specified time. If the next call is made with the same wakeupTime value, then the wakeup will occur the specified period after the previous wakeup occurred.</p>
<p >If a wakeupTime other than NONE is specified, then upon exit the state of the specified timer will be left as specified by wakeupTime with the timer enabled and the interrupt disabled. If the CTW or One PPS is already configured for wakeup, for example with the SleepTimer or RTC components, then specify NONE for the wakeupTime and include the appropriate source for wakeupSource.</p>
<p >PSoC 5LP: The wakeupTime parameter is not used and the only NONE can be specified. The wakeup time must be configured with the component, SleepTimer for CTW intervals and RTC for 1PPS interval. The component must be configured to generate interrupt.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wakeupTime</td><td>Specifies a timer wakeup source and the frequency of that source. For PSoC 5LP, this parameter is ignored.</td></tr>
  </table>
  </dd>
</dl>
<p>Define Time PM_SLEEP_TIME_NONE None </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PM_SLEEP_TIME_ONE_PPS</td><td>One PPS: 1 second </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_2MS</td><td>CTW: 2 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_4MS</td><td>CTW: 4 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_8MS</td><td>CTW: 8 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_16MS</td><td>CTW: 16 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_32MS</td><td>CTW: 32 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_64MS</td><td>CTW: 64 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_128MS</td><td>CTW: 128 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_256MS</td><td>CTW: 256 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_512MS</td><td>CTW: 512 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_1024MS</td><td>CTW: 1024 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_2048MS</td><td>CTW: 2048 ms </td></tr>
    <tr><td class="paramname">PM_SLEEP_TIME_CTW_4096MS</td><td>CTW: 4096 ms</td></tr>
    <tr><td class="paramname">wakeUpSource</td><td>Specifies a bitwise mask of wakeup sources. In addition, if a wakeupTime has been specified the associated timer will be included as a wakeup source.</td></tr>
  </table>
  </dd>
</dl>
<p>Define Source PM_SLEEP_SRC_NONE None PM_SLEEP_SRC_COMPARATOR0 Comparator 0 PM_SLEEP_SRC_COMPARATOR1 Comparator 1 PM_SLEEP_SRC_COMPARATOR2 Comparator 2 PM_SLEEP_SRC_COMPARATOR3 Comparator 3 PM_SLEEP_SRC_PICU PICU PM_SLEEP_SRC_I2C I2C PM_SLEEP_SRC_BOOSTCONVERTER Boost Converter PM_SLEEP_SRC_VD High and Low Voltage Detection (HVI, LVI) PM_SLEEP_SRC_CTW Central Timewheel* PM_SLEEP_SRC_ONE_PPS One PPS* PM_SLEEP_SRC_LCD LCD</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*Note</td><td>CTW and One PPS wakeup signals are in the same mask bit.</td></tr>
  </table>
  </dd>
</dl>
<p>When specifying a Comparator as the wakeupSource an instance specific define should be used that will track with the specific comparator that the instance is placed into. As an example for a Comparator instance named MyComp the </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>to OR into the mask is: MyComp_ctComp__CMP_MASK.</td></tr>
  </table>
  </dd>
</dl>
<p>When CTW or One PPS is used as a wakeup source, the <a class="el" href="codegentemp_2cy_pm_8c.html#a7f6c3c26c960cc2a69aa7d9a409875ff">CyPmReadStatus()</a> function must be called upon wakeup with corresponding parameter. Please refer to the <a class="el" href="codegentemp_2cy_pm_8c.html#a7f6c3c26c960cc2a69aa7d9a409875ff">CyPmReadStatus()</a> API in the System Reference Guide for more information.</p>
<p >Reentrant: No</p>
<p >Side Effects and Restrictions: If a wakeupTime other than NONE is specified, then upon exit the state of the specified timer will be left as specified by wakeupTime with the timer enabled and the interrupt disabled. Also, the ILO 1 KHz (if CTW timer is used as wake up time) will be left started.</p>
<p >The 1 kHz ILO clock is expected to be enabled for PSoC 3 and PSoC 5LP to measure Hibernate/Sleep regulator settling time after a reset. The holdoff delay is measured using rising edges of the 1 kHz ILO.</p>
<p >For PSoC 3 silicon hardware buzz should be disabled before entering a sleep power mode. It is disabled by PSoC Creator during startup. If a Low Voltage Interrupt (LVI), High Voltage Interrupt (HVI) or Brown Out detect (power supply supervising capabilities) are required in a design during sleep, use the Central Time Wheel (CTW) to periodically wake the device, perform software buzz, and refresh the supervisory services. If LVI, HVI, or Brown Out is not required, then CTW is not required. Refer to the device errata for more information. </p>
<p >The Hibernate/Sleep regulator has a settling time after a reset. During this time, the system ignores requests to enter Sleep and Hibernate modes. The holdoff delay is measured using rising edges of the 1 kHz ILO.</p>
<p >PSoC3 &lt; TO6:</p><ul>
<li>Hardware buzz must be disabled before the sleep mode entry.</li>
<li>Voltage supervision (HVI/LVI) requires hardware buzz, so they must be also disabled.</li>
</ul>
<p >PSoC3 &gt;= TO6:</p><ul>
<li>Voltage supervision (HVI/LVI) requires hardware buzz, so hardware buzz must be enabled before the sleep mode entry and restored on the wakeup.</li>
</ul>
<p >For ARM-based devices,interrupt is required for the CPU to wake up. The Power Management implementation assumes that wakeup time is configured with a separate component (component-based wakeup time configuration) for interrupt to be issued on terminal count. For more information, refer to the Wakeup Time Configuration section of System Reference Guide.</p>
<p >Do not use the merge region below unless any component datasheet suggests doing so.</p>
<p >Do not use merge region below unless any component datasheet suggest to do so.</p>

<p class="definition">Definition at line <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html#l00824">824</a> of file <a class="el" href="_generated___source_2_p_so_c5_2cy_pm_8c_source.html">cyPm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
